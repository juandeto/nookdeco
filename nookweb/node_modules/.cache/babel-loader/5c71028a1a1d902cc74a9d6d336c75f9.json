{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import withErrorHandler from\"./../../../hoc/withErrorHandler/withErrorHandler\";import Input from\"./../../../components/Ul/input/input\";import classes from\"./ContactData.module.css\";import{connect}from\"react-redux\";import Auxiliary from\"./../../../hoc/Auxiliary\";import axios from\"./../../../axios\";import{withRouter}from\"react-router-dom\";import Spinner from\"./../../../components/Ul/Spinner/Spinner\";import CardOptionsEnvio from'./../../../components/Ul/CardOptionsEnvio/CardOptionsEnvio';import CardOptionsPagos from'./../../../components/Ul/CardOptionPagos/CardOptionsPagos';import*as actions from\"./../../../store/actions/index\";import Modal from'./../../../components/Ul/Modal/Modal';import CurrencyFormat from'react-currency-format';import{format}from\"date-fns\";var ContactData=/*#__PURE__*/function(_Component){_inherits(ContactData,_Component);var _super=_createSuper(ContactData);function ContactData(){var _this;_classCallCheck(this,ContactData);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this._isMounted=false;_this.state={orderForm:{nombre:{elementType:\"input\",elementConfig:{type:\"text\",placeholder:\"Ingresa tu nombre y apellido\"},value:\"\",validation:{required:true},valid:false,touched:false},email:{elementType:\"input\",elementConfig:{type:\"email\",placeholder:\"Ingresá tu email\"},value:\"\",validation:{required:true},valid:false,touched:false},telefono:{elementType:\"input\",elementConfig:{type:\"text\",placeholder:\"Telefono\"},value:\"\",validation:{required:true},valid:false,touched:false},provincia:{elementType:\"select\",elementConfig:{option:[{value:\"G.B.A (Gran Buenos Aires)\",displayValue:\"Gran Buenos Aires (G.B.A)\"},{value:\"Buenos Aires Interior\",displayValue:\"Buenos Aires Interior\"},{value:\"Catamarca\",displayValue:\"Catamarca\"},{value:\"C.A.B.A\",displayValue:\"C.A.B.A\"},{value:\"Chaco\",displayValue:\"Chaco\"},{value:\"Chubut\",displayValue:\"Chubut\"},{value:\"Cordoba\",displayValue:\"Cordoba\"},{value:\"Corrientes\",displayValue:\"Corrientes\"},{value:\"Entre Rios\",displayValue:\"Entre Rios\"},{value:\"Formosa\",displayValue:\"Formosa\"},{value:\"Jujuy\",displayValue:\"Jujuy\"},{value:\"La Pampa\",displayValue:\"La Pampa\"},{value:\"La Rioja\",displayValue:\"La Rioja\"},{value:\"Mendoza\",displayValue:\"Mendoza\"},{value:\"Misiones\",displayValue:\"Misiones\"},{value:\"Neuquen\",displayValue:\"Neuquen\"},{value:\"Rio Negro\",displayValue:\"Rio Negro\"},{value:\"Salta\",displayValue:\"Salta\"},{value:\"San Juan\",displayValue:\"San Juan\"},{value:\"San Luis\",displayValue:\"San Luis\"},{value:\"Santa Cruz\",displayValue:\"Santa Cruz\"},{value:\"Santa Fe\",displayValue:\"Santa Fe\"},{value:\"Sgo. del Estero\",displayValue:\"Sgo. del Estero\"},{value:\"Tierra del Fuego\",displayValue:\"Tierra del Fuego\"},{value:\"Tucuman\",displayValue:\"Tucuman\"}]},value:\"G.B.A (Gran Buenos Aires)\",validation:{required:true},valid:true,touched:false}},formIsValid:false,loading:false,submitingBeforeComplete:false,showPriceModal:false};_this.showPriceModalHandler=function(event){event.preventDefault();_this.setState({showPriceModal:!_this.state.showPriceModal});};_this.mercadoPago=function(order){var freeShipping=[\"C.A.B.A\",\"G.B.A (Gran Buenos Aires)\"];var shippingCost=order.formaDeEnvio===\"A convenir\"&&!freeShipping.includes(order.orderData.provincia)?400:0;var orderItems=[];for(var i=0;i<order.basket.length;i++){var item={title:order.basket[i].modelo,unit_price:order.basket[i].precioParticular,quantity:order.basket[i].cantidad};orderItems.push(item);}var postData={items:[orderItems],name:order.orderData.nombre,email:order.orderData.email,number:order.orderData.telefono,shipments:{cost:shippingCost},total_amount:order.price+shippingCost};axios.post('https://excited-excited-stealer.glitch.me/mercadopago/create',{headers:{Authorization:'Access-Control-Allow-Headers\", \"X-Requested-With, content-type'},data:postData,order:order}).then(function(response){return window.location=response.data;});};_this.orderHandler=function(event){_this.setState({loading:true});event.preventDefault();var formData={};for(var formElementIdentifier in _this.state.orderForm){formData[formElementIdentifier]=_this.state.orderForm[formElementIdentifier].value;}var date=new Date();var time=format(date,\"dd/MM/yyyy HH:mm:ss\");var order={basket:_this.props.basket,price:_this.props.price,orderData:formData,formaDePago:_this.props.formaDePago,formaDeEnvio:_this.props.formaDeEnvio,pagado:false,entregado:false,date:time};_this.props.onCreateOrder(order);// this.discountHandler(formData.provincia)\naxios.post(\"/orders.json\",order).then(function(response){if(_this._isMounted){}}).then(function(responseData){if(_this._isMounted&&order.formaDePago==='Transferencia Bancaria'){axios.post('https://nookdeco.com/emails/create',{\"to\":\"\".concat(order.orderData.email),\"subject\":\"Tu Compra en Nook\",\"html\":'<h1 style=\"text-align: center\"><b><i>Nook</i></b></h1><br><h3 style=\"text-align:center;margin-top:-20px\"><b>MARIANA LACROZE</b></h3><br><p>Hola '+order.orderData.nombre+',</p><br><p>¡Muchas gracias por tu compra!</p><p>Por favor, transferinos a nuestra cuenta: . <br>No olvides enviarnos el comprobante de transferencia a +54 9 11 55623604</p><br><p><b>Detalle de compra:</b></p><br>'+order.basket+'<p><b>Monto Total</b> = $'+order.price+'</p><br><p>Pronto nos estaremos comunicando con vos al '+order.orderData.telefono+'.</p><br><p>Saludos,</p><p>Equipo Nook</p>'}).then(_this.setState({loading:false})).then(_this.props.history.push(\"/pagos\"));}else{return _this.mercadoPago(order);}}).catch(function(error){return console.log(error);});//this.props.onLoading());\n};_this.pagoHandler=function(event){var formaDePago=event.target.value;_this.props.onFormaDePagoSelected(formaDePago,_this.props.basket);};_this.envioHandler=function(event){var formaDeEnvio=event.target.value;_this.props.onSelectFormaDeEnvio(formaDeEnvio);};_this.submitingBeforeCompleteHandler=function(event){event.preventDefault();_this.setState({submitingBeforeComplete:!_this.state.submitingBeforeComplete});};return _this;}_createClass(ContactData,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){if(this.props.formaDePago!==nextProps.formaDePago||this.props.formaDeEnvio!==nextProps.formaDeEnvio||this.state!==nextState){return true;}else{return false;}}},{key:\"componentDidMount\",value:function componentDidMount(){this._isMounted=true;}},{key:\"checkValidity\",value:function checkValidity(value,rules){var isValid=true;if(rules.required){isValid=value.trim()!==\"\"&&isValid;}if(rules.minLength){isValid=value.length>=rules.minLength&&isValid;}return isValid;}},{key:\"inputChangeHandler\",value:function inputChangeHandler(event,inputIdentifier){var updatedOrderForm=_objectSpread({},this.state.orderForm);var updatedFormElement=_objectSpread({},updatedOrderForm[inputIdentifier]);updatedFormElement.value=event.target.value;updatedFormElement.valid=this.checkValidity(updatedFormElement.value,updatedFormElement.validation);updatedFormElement.touched=true;updatedOrderForm[inputIdentifier]=updatedFormElement;if(inputIdentifier==='provincia'){this.props.onProvinciaSelected(updatedOrderForm[inputIdentifier].value);}var formIsValid=true;for(var _inputIdentifier in updatedOrderForm){formIsValid=updatedOrderForm[_inputIdentifier].valid&&formIsValid;}this.setState({orderForm:updatedOrderForm,formIsValid:formIsValid});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var arrayClasses=[classes.submitBtn,classes.disabled];var formElementsArray=[];for(var key in this.state.orderForm){formElementsArray.push({id:key,config:this.state.orderForm[key]});}var form=/*#__PURE__*/React.createElement(\"form\",{className:classes.ContactData,onSubmit:this.props.formaDeEnvio!==null&&this.props.formaDePago!==null&&this.props.basket.length!==0&&this.state.formIsValid?this.showPriceModalHandler:this.submitingBeforeCompleteHandler},this.state.submitingBeforeComplete?/*#__PURE__*/React.createElement(Modal,{modalClosed:this.submitingBeforeCompleteHandler,show:this.state.submitingBeforeComplete},/*#__PURE__*/React.createElement(\"p\",null,\"Por favor, complete todos los datos requeridos antes de enviar el formulario\")):null,/*#__PURE__*/React.createElement(CardOptionsEnvio,{formaDeEnvio:this.props.formaDeEnvio,envioSelected:this.envioHandler}),/*#__PURE__*/React.createElement(\"h4\",{className:classes.datosContacto},\"Datos de contacto\"),formElementsArray.map(function(formElement){return _this2.props.formaDeEnvio===\"Retiro\"&&formElement.id==='provincia'?null:/*#__PURE__*/React.createElement(React.Fragment,{key:formElement.id},_this2.props.formaDeEnvio===\"A convenir\"&&formElement.id==='provincia'?/*#__PURE__*/React.createElement(\"p\",{className:classes.formInputEnvioMsj},\"Elija la provincia de envio:\"):null,/*#__PURE__*/React.createElement(Input,{key:formElement.id,elementType:formElement.config.elementType,elementConfig:formElement.config.elementConfig,value:formElement.config.value,invalid:!formElement.config.valid,shouldValidate:formElement.config.validation,touched:formElement.config.touched,changed:function changed(event){return _this2.inputChangeHandler(event,formElement.id);}}));}),/*#__PURE__*/React.createElement(CardOptionsPagos,{formaDePago:this.props.formaDePago,formaDePagoSelected:this.pagoHandler}),this.props.formaDePago===\"Transferencia Bancaria\"?/*#__PURE__*/React.createElement(\"p\",{className:classes.discountMessage},\"Se le aplic\\xF3 un 20% de descuento.\"):null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:this.props.formaDeEnvio!==null&&this.props.formaDePago!==null&&this.props.basket.length!==0&&this.state.formIsValid?arrayClasses[0]:arrayClasses.join(\" \"),disabled:this.props.formaDeEnvio===null&&this.props.formaDePago===null&&!this.state.formIsValid&&this.props.basket.length===0},\"Proceder al pago\"),/*#__PURE__*/React.createElement(Modal,{show:this.state.showPriceModal,modalClosed:this.showPriceModalHandler},/*#__PURE__*/React.createElement(\"div\",{className:classes.pagoMessage},/*#__PURE__*/React.createElement(\"div\",{className:classes.envioMessage},\"Forma de Env\\xEDo: \",this.props.formaDeEnvio,this.state.orderForm.provincia.value!=='G.B.A (Gran Buenos Aires)'||this.state.orderForm.provincia.value===\"C.A.B.A\"?/*#__PURE__*/React.createElement(\"span\",null,\"+ $400\"):null,this.props.formaDeEnvio===\"A convenir\"?/*#__PURE__*/React.createElement(\"p\",null,\"Provincia: \",this.state.orderForm.provincia.value):null),/*#__PURE__*/React.createElement(\"div\",{className:classes.formaDePagoMessage},\"Forma de Pago: \",this.props.formaDePago,this.props.formaDePago===\"Transferencia Bancaria\"?/*#__PURE__*/React.createElement(\"span\",null,\"- 20%\"):null),/*#__PURE__*/React.createElement(CurrencyFormat,{renderText:function renderText(value){return/*#__PURE__*/React.createElement(\"h3\",{className:classes.precioFinalMessage},\"Precio Final: \",value);},decimalScale:2,value:this.props.price//Homework\n,displayType:\"text\",thousandSeparator:true,prefix:\"$\",fixedDecimalScale:true})),/*#__PURE__*/React.createElement(\"button\",{className:classes.ModalBtn,onClick:this.orderHandler},\"Ir a Pagar\")));if(this.state.loading){form=/*#__PURE__*/React.createElement(Spinner,null);}return/*#__PURE__*/React.createElement(Auxiliary,null,form);}}]);return ContactData;}(Component);var mapStateToProps=function mapStateToProps(state){return{basket:state.carrito.basket,price:state.carrito.totalPrice,formaDePago:state.carrito.formaDePago,formaDeEnvio:state.carrito.formaDeEnvio};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onCreateOrder:function onCreateOrder(order){return dispatch(actions.onCreateOrder(order));},onFormaDePagoSelected:function onFormaDePagoSelected(formaDePago,basket){return dispatch(actions.onSelectFormaDePago(formaDePago,basket));},onSelectFormaDeEnvio:function onSelectFormaDeEnvio(formaDeEnvio){return dispatch(actions.onSelectFormaDeEnvio(formaDeEnvio));},onProvinciaSelected:function onProvinciaSelected(provincia){return dispatch(actions.onProvinciaSelected(provincia));}};};export default connect(mapStateToProps,mapDispatchToProps)(withRouter(withErrorHandler(ContactData,axios)));//this.props.basket.length === 0 &&","map":{"version":3,"sources":["C:/Users/Juan/Desktop/paginanook/nookweb/src/containers/Carrito/ContactData/ContactData.js"],"names":["React","Component","withErrorHandler","Input","classes","connect","Auxiliary","axios","withRouter","Spinner","CardOptionsEnvio","CardOptionsPagos","actions","Modal","CurrencyFormat","format","ContactData","_isMounted","state","orderForm","nombre","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","email","telefono","provincia","option","displayValue","formIsValid","loading","submitingBeforeComplete","showPriceModal","showPriceModalHandler","event","preventDefault","setState","mercadoPago","order","freeShipping","shippingCost","formaDeEnvio","includes","orderData","orderItems","i","basket","length","item","title","modelo","unit_price","precioParticular","quantity","cantidad","push","postData","items","name","number","shipments","cost","total_amount","price","post","headers","Authorization","data","then","response","window","location","orderHandler","formData","formElementIdentifier","date","Date","time","props","formaDePago","pagado","entregado","onCreateOrder","responseData","history","catch","error","console","log","pagoHandler","target","onFormaDePagoSelected","envioHandler","onSelectFormaDeEnvio","submitingBeforeCompleteHandler","nextProps","nextState","rules","isValid","trim","minLength","inputIdentifier","updatedOrderForm","updatedFormElement","checkValidity","onProvinciaSelected","arrayClasses","submitBtn","disabled","formElementsArray","key","id","config","form","datosContacto","map","formElement","formInputEnvioMsj","inputChangeHandler","discountMessage","join","pagoMessage","envioMessage","formaDePagoMessage","precioFinalMessage","ModalBtn","mapStateToProps","carrito","totalPrice","mapDispatchToProps","dispatch","onSelectFormaDePago"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport withErrorHandler from \"./../../../hoc/withErrorHandler/withErrorHandler\";\r\nimport Input from \"./../../../components/Ul/input/input\";\r\nimport classes from \"./ContactData.module.css\";\r\nimport { connect } from \"react-redux\";\r\nimport Auxiliary from \"./../../../hoc/Auxiliary\";\r\nimport axios from \"./../../../axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Spinner from \"./../../../components/Ul/Spinner/Spinner\";\r\nimport CardOptionsEnvio from './../../../components/Ul/CardOptionsEnvio/CardOptionsEnvio';\r\nimport CardOptionsPagos from './../../../components/Ul/CardOptionPagos/CardOptionsPagos';\r\nimport * as actions from \"./../../../store/actions/index\";\r\nimport Modal from './../../../components/Ul/Modal/Modal';\r\nimport CurrencyFormat from 'react-currency-format';\r\n\r\nimport { format } from \"date-fns\";\r\n\r\nclass ContactData extends Component {\r\n  _isMounted=false;\r\n  state = {\r\n    orderForm: {\r\n      nombre: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Ingresa tu nombre y apellido\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      \r\n      email: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Ingresá tu email\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      telefono: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Telefono\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      provincia: {\r\n        elementType: \"select\",\r\n        elementConfig: {\r\n          option: [\r\n            {\r\n              value: \"G.B.A (Gran Buenos Aires)\",\r\n              displayValue: \"Gran Buenos Aires (G.B.A)\",\r\n            },\r\n            {\r\n              value: \"Buenos Aires Interior\",\r\n              displayValue: \"Buenos Aires Interior\",\r\n            },\r\n            { value: \"Catamarca\", displayValue: \"Catamarca\" },\r\n            { value: \"C.A.B.A\", displayValue: \"C.A.B.A\" },\r\n            { value: \"Chaco\", displayValue: \"Chaco\" },\r\n            { value: \"Chubut\", displayValue: \"Chubut\" },\r\n            { value: \"Cordoba\", displayValue: \"Cordoba\" },\r\n            { value: \"Corrientes\", displayValue: \"Corrientes\" },\r\n            { value: \"Entre Rios\", displayValue: \"Entre Rios\" },\r\n            { value: \"Formosa\", displayValue: \"Formosa\" },\r\n            { value: \"Jujuy\", displayValue: \"Jujuy\" },\r\n            { value: \"La Pampa\", displayValue: \"La Pampa\" },\r\n            { value: \"La Rioja\", displayValue: \"La Rioja\" },\r\n            { value: \"Mendoza\", displayValue: \"Mendoza\" },\r\n            { value: \"Misiones\", displayValue: \"Misiones\" },\r\n            { value: \"Neuquen\", displayValue: \"Neuquen\" },\r\n            { value: \"Rio Negro\", displayValue: \"Rio Negro\" },\r\n            { value: \"Salta\", displayValue: \"Salta\" },\r\n            { value: \"San Juan\", displayValue: \"San Juan\" },\r\n            { value: \"San Luis\", displayValue: \"San Luis\" },\r\n            { value: \"Santa Cruz\", displayValue: \"Santa Cruz\" },\r\n            { value: \"Santa Fe\", displayValue: \"Santa Fe\" },\r\n            { value: \"Sgo. del Estero\", displayValue: \"Sgo. del Estero\" },\r\n            { value: \"Tierra del Fuego\", displayValue: \"Tierra del Fuego\" },\r\n            { value: \"Tucuman\", displayValue: \"Tucuman\" },\r\n          ],\r\n        },\r\n        value: \"G.B.A (Gran Buenos Aires)\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: true,\r\n        touched: false,\r\n      }\r\n    },\r\n    formIsValid: false,\r\n    loading: false,\r\n    submitingBeforeComplete: false,\r\n    showPriceModal: false\r\n  };\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if(this.props.formaDePago !== nextProps.formaDePago\r\n      || this.props.formaDeEnvio !== nextProps.formaDeEnvio\r\n      || this.state !== nextState){\r\n      return true\r\n    }else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this._isMounted=true;\r\n  }\r\n\r\n  showPriceModalHandler = (event)=>{\r\n    event.preventDefault();\r\n    this.setState({showPriceModal: !this.state.showPriceModal})\r\n  }\r\n\r\n  mercadoPago = (order) => {\r\n    const freeShipping = [\"C.A.B.A\", \"G.B.A (Gran Buenos Aires)\"];\r\n    var shippingCost   = order.formaDeEnvio === \"A convenir\" && !freeShipping.includes(order.orderData.provincia) ? 400 : 0;\r\n    var orderItems=[];\r\n    for(var i = 0;i<order.basket.length;i++){\r\n      var item = {\r\n        title: order.basket[i].modelo,\r\n        unit_price: order.basket[i].precioParticular,\r\n        quantity: order.basket[i].cantidad,\r\n      };\r\n      orderItems.push(item);\r\n    }\r\n    var postData = {\r\n      items: [\r\n        orderItems,\r\n      ],\r\n      name: order.orderData.nombre,\r\n      email: order.orderData.email,\r\n      number: order.orderData.telefono,\r\n      shipments:{\r\n        cost: shippingCost,\r\n      },\r\n      total_amount: order.price + shippingCost,\r\n    };\r\n    axios.post('https://excited-excited-stealer.glitch.me/mercadopago/create', {\r\n      headers: {\r\n        Authorization: 'Access-Control-Allow-Headers\", \"X-Requested-With, content-type',\r\n      },\r\n      data: postData,\r\n      order: order,\r\n    })\r\n    .then(response => {\r\n      return  window.location = response.data;\r\n    })\r\n  }\r\n\r\n\r\n\r\n orderHandler = (event) => {\r\n    this.setState({ loading: true });\r\n    event.preventDefault();\r\n    const formData = {};\r\n    for (let formElementIdentifier in this.state.orderForm) {\r\n      formData[formElementIdentifier] = this.state.orderForm[\r\n        formElementIdentifier\r\n      ].value;\r\n    }\r\n\r\n    let date = new Date();\r\n   let time = format(date, \"dd/MM/yyyy HH:mm:ss\");\r\n    const order = {\r\n      basket: this.props.basket,\r\n      price: this.props.price,\r\n      orderData: formData,\r\n      formaDePago: this.props.formaDePago,\r\n      formaDeEnvio: this.props.formaDeEnvio,\r\n      pagado: false,\r\n      entregado: false,\r\n      date: time,\r\n    };\r\n\r\n    this.props.onCreateOrder(order)\r\n    // this.discountHandler(formData.provincia)\r\n\r\n    axios\r\n      .post(\"/orders.json\", order)\r\n      .then((response) => {\r\n        if(this._isMounted){\r\n          \r\n        }\r\n      })\r\n      .then(responseData =>{\r\n      if(this._isMounted && order.formaDePago === 'Transferencia Bancaria'){\r\n        axios.post('https://nookdeco.com/emails/create', {\r\n          \"to\": `${order.orderData.email}`,\r\n          \"subject\": \"Tu Compra en Nook\",\r\n          \"html\": '<h1 style=\"text-align: center\"><b><i>Nook</i></b></h1><br><h3 style=\"text-align:center;margin-top:-20px\"><b>MARIANA LACROZE</b></h3><br><p>Hola '+order.orderData.nombre+',</p><br><p>¡Muchas gracias por tu compra!</p><p>Por favor, transferinos a nuestra cuenta: . <br>No olvides enviarnos el comprobante de transferencia a +54 9 11 55623604</p><br><p><b>Detalle de compra:</b></p><br>'+order.basket+'<p><b>Monto Total</b> = $'+order.price+'</p><br><p>Pronto nos estaremos comunicando con vos al '+order.orderData.telefono+'.</p><br><p>Saludos,</p><p>Equipo Nook</p>'\r\n  }).then(\r\n    this.setState({ loading: false })\r\n  )\r\n  .then(this.props.history.push(\"/pagos\"))\r\n      }else{\r\n        return this.mercadoPago(order);\r\n      }\r\n      })\r\n      .catch((error) => console.log(error)); //this.props.onLoading());\r\n  }\r\n\r\n  checkValidity(value, rules){\r\n    let isValid = true;\r\n\r\n    if (rules.required) {\r\n      isValid = value.trim() !== \"\" && isValid;\r\n    }\r\n\r\n    if (rules.minLength) {\r\n      isValid = value.length >= rules.minLength && isValid;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  inputChangeHandler(event, inputIdentifier){\r\n    const updatedOrderForm = {\r\n      ...this.state.orderForm,\r\n    };\r\n    const updatedFormElement = {\r\n      ...updatedOrderForm[inputIdentifier],\r\n    };\r\n\r\n    updatedFormElement.value = event.target.value;\r\n    updatedFormElement.valid = this.checkValidity(\r\n      updatedFormElement.value,\r\n      updatedFormElement.validation\r\n    );\r\n    updatedFormElement.touched = true;\r\n    \r\n    updatedOrderForm[inputIdentifier] = updatedFormElement;\r\n\r\n if(inputIdentifier=== 'provincia'){\r\n   this.props.onProvinciaSelected(updatedOrderForm[inputIdentifier].value)\r\n }\r\n    \r\n  \r\n\r\n    let formIsValid = true;\r\n    for (let inputIdentifier in updatedOrderForm) {\r\n      formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;\r\n    }\r\n    this.setState({ orderForm: updatedOrderForm, formIsValid: formIsValid });\r\n  };\r\n\r\n  pagoHandler = (event) => {\r\n    let formaDePago = event.target.value;\r\n    this.props.onFormaDePagoSelected(formaDePago, this.props.basket);\r\n  };\r\n\r\n  envioHandler =(event) =>{\r\n    let formaDeEnvio = event.target.value;\r\n    this.props.onSelectFormaDeEnvio(formaDeEnvio)\r\n  }\r\n\r\n  submitingBeforeCompleteHandler = (event) =>{\r\n    event.preventDefault();\r\n    this.setState({submitingBeforeComplete: !this.state.submitingBeforeComplete})\r\n  }\r\n\r\n  componentWillUnmount(){\r\n      this._isMounted=false;\r\n  \r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    const arrayClasses = [classes.submitBtn, classes.disabled];\r\n    const formElementsArray = [];\r\n    for (let key in this.state.orderForm) {\r\n      formElementsArray.push({\r\n        id: key,\r\n        config: this.state.orderForm[key],\r\n      });\r\n    }\r\n\r\n    let form = (\r\n      <form className={classes.ContactData} onSubmit={\r\n        this.props.formaDeEnvio !== null &&\r\n        this.props.formaDePago !== null &&\r\n        this.props.basket.length !== 0 &&\r\n        this.state.formIsValid ?\r\n        this.showPriceModalHandler: this.submitingBeforeCompleteHandler\r\n      }>\r\n        {\r\n         this.state.submitingBeforeComplete ? \r\n         <Modal \r\n         modalClosed={this.submitingBeforeCompleteHandler}\r\n         show={this.state.submitingBeforeComplete}><p>Por favor, complete todos los datos requeridos antes de enviar el formulario</p></Modal> : null\r\n        }\r\n        <CardOptionsEnvio formaDeEnvio={this.props.formaDeEnvio} envioSelected={this.envioHandler}/>\r\n        <h4 className={classes.datosContacto}>Datos de contacto</h4>\r\n        {formElementsArray.map((formElement) => {\r\n          return this.props.formaDeEnvio === \"Retiro\" && formElement.id === 'provincia' ?\r\n            null :\r\n            <React.Fragment key={formElement.id}>\r\n              {\r\n                this.props.formaDeEnvio === \"A convenir\" && formElement.id === 'provincia' ?\r\n                <p className={classes.formInputEnvioMsj}>Elija la provincia de envio:</p> : null\r\n              }\r\n              <Input\r\n             key={formElement.id}\r\n             elementType={formElement.config.elementType}\r\n             elementConfig={formElement.config.elementConfig}\r\n             value={formElement.config.value}\r\n             invalid={!formElement.config.valid}\r\n             shouldValidate={formElement.config.validation}\r\n             touched={formElement.config.touched}\r\n             changed={(event) =>\r\n               this.inputChangeHandler(event, formElement.id)\r\n             }\r\n           />\r\n            </React.Fragment>\r\n             \r\n           \r\n          \r\n        })}\r\n\r\n        <CardOptionsPagos formaDePago={this.props.formaDePago} formaDePagoSelected={this.pagoHandler} />\r\n        {this.props.formaDePago === \"Transferencia Bancaria\" ? \r\n        <p className={classes.discountMessage}>Se le aplicó un 20% de descuento.</p> : null}\r\n        <button\r\n          type=\"submit\"\r\n          className={\r\n            this.props.formaDeEnvio !== null &&\r\n            this.props.formaDePago !== null &&\r\n            this.props.basket.length !== 0 &&\r\n            this.state.formIsValid\r\n              ? arrayClasses[0]\r\n              : arrayClasses.join(\" \")\r\n          }\r\n          disabled={\r\n            this.props.formaDeEnvio === null &&\r\n            this.props.formaDePago === null &&\r\n            !this.state.formIsValid &&\r\n            this.props.basket.length === 0\r\n          }\r\n        >\r\n          Proceder al pago\r\n        </button>\r\n        <Modal show={this.state.showPriceModal} modalClosed={this.showPriceModalHandler}>\r\n          <div className={classes.pagoMessage}>\r\n        <div className={classes.envioMessage}>Forma de Envío: {this.props.formaDeEnvio}\r\n        {\r\n        this.state.orderForm.provincia.value !== 'G.B.A (Gran Buenos Aires)' || this.state.orderForm.provincia.value ===  \"C.A.B.A\" ?\r\n        <span>+ $400</span> : null\r\n       }\r\n        {this.props.formaDeEnvio === \"A convenir\" ?\r\n         <p>Provincia: {this.state.orderForm.provincia.value}</p>: null}\r\n        \r\n       </div>\r\n       <div className={classes.formaDePagoMessage}>Forma de Pago: {this.props.formaDePago}\r\n       {this.props.formaDePago === \"Transferencia Bancaria\" ? <span>- 20%</span> : null}\r\n       </div>\r\n       <CurrencyFormat \r\n                renderText={(value)=>{\r\n                    return(\r\n               <h3 className={classes.precioFinalMessage}>Precio Final: {value}</h3>\r\n                        )\r\n                }}\r\n                decimalScale={2}\r\n                value={this.props.price} //Homework\r\n                displayType={\"text\"}\r\n                thousandSeparator={true}\r\n                prefix={\"$\"}\r\n                fixedDecimalScale={true}\r\n            />\r\n      \r\n          </div>\r\n          <button className={classes.ModalBtn}onClick={this.orderHandler}>\r\n            Ir a Pagar\r\n          </button>\r\n        </Modal>\r\n      </form>\r\n    );\r\n    if (this.state.loading) {\r\n      form = <Spinner />;\r\n    }\r\n\r\n    return <Auxiliary>{form}</Auxiliary>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    basket: state.carrito.basket,\r\n    price: state.carrito.totalPrice,\r\n    formaDePago: state.carrito.formaDePago,\r\n    formaDeEnvio: state.carrito.formaDeEnvio\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onCreateOrder: (order) => dispatch(actions.onCreateOrder(order)),\r\n    onFormaDePagoSelected: (formaDePago, basket) =>\r\n      dispatch(actions.onSelectFormaDePago(formaDePago, basket)),\r\n    onSelectFormaDeEnvio: (formaDeEnvio)=>dispatch(actions.onSelectFormaDeEnvio(formaDeEnvio)),\r\n    onProvinciaSelected: (provincia) => dispatch(actions.onProvinciaSelected(provincia))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(withErrorHandler(ContactData, axios)));\r\n\r\n//this.props.basket.length === 0 &&\r\n"]},"metadata":{},"sourceType":"module"}