{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\src\\\\containers\\\\Carrito\\\\ContactData\\\\ContactData.js\";\nimport React, { Component } from \"react\";\nimport withErrorHandler from \"./../../../hoc/withErrorHandler/withErrorHandler\";\nimport Input from \"./../../../components/Ul/input/input\";\nimport classes from \"./ContactData.module.css\";\nimport { connect } from \"react-redux\";\nimport Auxiliary from \"./../../../hoc/Auxiliary\";\nimport axios from \"./../../../axios\";\nimport { withRouter } from \"react-router-dom\";\nimport Spinner from \"./../../../components/Ul/Spinner/Spinner\";\nimport CardOptionsEnvio from './../../../components/Ul/CardOptionsEnvio/CardOptionsEnvio';\nimport CardOptionsPagos from './../../../components/Ul/CardOptionPagos/CardOptionsPagos';\nimport * as actions from \"./../../../store/actions/index\";\nimport Modal from './../../../components/Ul/Modal/Modal';\nimport CurrencyFormat from 'react-currency-format';\nimport { format } from \"date-fns\";\n\nclass ContactData extends Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.state = {\n      orderForm: {\n        nombre: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Ingresa tu nombre y apellido\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        email: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"email\",\n            placeholder: \"Ingresá tu email\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        telefono: {\n          elementType: \"input\",\n          elementConfig: {\n            type: \"text\",\n            placeholder: \"Telefono\"\n          },\n          value: \"\",\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        provincia: {\n          elementType: \"select\",\n          elementConfig: {\n            option: [{\n              value: \"G.B.A (Gran Buenos Aires)\",\n              displayValue: \"Gran Buenos Aires (G.B.A)\"\n            }, {\n              value: \"Buenos Aires Interior\",\n              displayValue: \"Buenos Aires Interior\"\n            }, {\n              value: \"Catamarca\",\n              displayValue: \"Catamarca\"\n            }, {\n              value: \"C.A.B.A\",\n              displayValue: \"C.A.B.A\"\n            }, {\n              value: \"Chaco\",\n              displayValue: \"Chaco\"\n            }, {\n              value: \"Chubut\",\n              displayValue: \"Chubut\"\n            }, {\n              value: \"Cordoba\",\n              displayValue: \"Cordoba\"\n            }, {\n              value: \"Corrientes\",\n              displayValue: \"Corrientes\"\n            }, {\n              value: \"Entre Rios\",\n              displayValue: \"Entre Rios\"\n            }, {\n              value: \"Formosa\",\n              displayValue: \"Formosa\"\n            }, {\n              value: \"Jujuy\",\n              displayValue: \"Jujuy\"\n            }, {\n              value: \"La Pampa\",\n              displayValue: \"La Pampa\"\n            }, {\n              value: \"La Rioja\",\n              displayValue: \"La Rioja\"\n            }, {\n              value: \"Mendoza\",\n              displayValue: \"Mendoza\"\n            }, {\n              value: \"Misiones\",\n              displayValue: \"Misiones\"\n            }, {\n              value: \"Neuquen\",\n              displayValue: \"Neuquen\"\n            }, {\n              value: \"Rio Negro\",\n              displayValue: \"Rio Negro\"\n            }, {\n              value: \"Salta\",\n              displayValue: \"Salta\"\n            }, {\n              value: \"San Juan\",\n              displayValue: \"San Juan\"\n            }, {\n              value: \"San Luis\",\n              displayValue: \"San Luis\"\n            }, {\n              value: \"Santa Cruz\",\n              displayValue: \"Santa Cruz\"\n            }, {\n              value: \"Santa Fe\",\n              displayValue: \"Santa Fe\"\n            }, {\n              value: \"Sgo. del Estero\",\n              displayValue: \"Sgo. del Estero\"\n            }, {\n              value: \"Tierra del Fuego\",\n              displayValue: \"Tierra del Fuego\"\n            }, {\n              value: \"Tucuman\",\n              displayValue: \"Tucuman\"\n            }]\n          },\n          value: \"G.B.A (Gran Buenos Aires)\",\n          validation: {\n            required: true\n          },\n          valid: true,\n          touched: false\n        }\n      },\n      formIsValid: false,\n      loading: false,\n      submitingBeforeComplete: false,\n      showPriceModal: false\n    };\n\n    this.showPriceModalHandler = event => {\n      event.preventDefault();\n      this.setState({\n        showPriceModal: !this.state.showPriceModal\n      });\n    };\n\n    this.mercadoPago = order => {\n      const freeShipping = [\"C.A.B.A\", \"G.B.A (Gran Buenos Aires)\"];\n      var shippingCost = order.formaDeEnvio === \"A convenir\" && !freeShipping.includes(order.orderData.provincia) ? 400 : 0;\n      var orderItems = [];\n\n      for (var i = 0; i < order.basket.length; i++) {\n        var item = {\n          title: order.basket[i].modelo,\n          unit_price: order.basket[i].precioParticular,\n          quantity: order.basket[i].cantidad\n        };\n        orderItems.push(item);\n      }\n\n      var postData = {\n        items: [orderItems],\n        name: order.orderData.nombre,\n        email: order.orderData.email,\n        number: order.orderData.telefono,\n        shipments: {\n          cost: shippingCost\n        },\n        total_amount: order.price + shippingCost\n      };\n      axios.post('https://excited-excited-stealer.glitch.me/mercadopago/create', {\n        headers: {\n          Authorization: 'Access-Control-Allow-Headers\", \"X-Requested-With, content-type'\n        },\n        data: postData,\n        order: order\n      }).then(function (response) {\n        this.setState({\n          loading: false\n        });\n        return window.location = response.data;\n      });\n    };\n\n    this.orderHandler = event => {\n      this.setState({\n        loading: true\n      });\n      event.preventDefault();\n      const formData = {};\n\n      for (let formElementIdentifier in this.state.orderForm) {\n        formData[formElementIdentifier] = this.state.orderForm[formElementIdentifier].value;\n      }\n\n      let date = new Date();\n      let time = format(date, \"dd/MM/yyyy HH:mm:ss\");\n      const order = {\n        basket: this.props.basket,\n        price: this.props.price,\n        orderData: formData,\n        formaDePago: this.props.formaDePago,\n        formaDeEnvio: this.props.formaDeEnvio,\n        pagado: false,\n        entregado: false,\n        date: time\n      };\n      this.props.onCreateOrder(order); // this.discountHandler(formData.provincia)\n\n      axios.post(\"/orders.json\", order).then(response => {\n        if (this._isMounted) {}\n      }).then(responseData => {\n        if (this._isMounted && order.formaDePago === 'Transferencia Bancaria') {\n          this.setState({\n            loading: false\n          });\n          return this.props.history.push(\"/pagos\");\n        } else {\n          return this.mercadoPago(order);\n        }\n      }).catch(error => console.log(error)); //this.props.onLoading());\n    };\n\n    this.pagoHandler = event => {\n      let formaDePago = event.target.value;\n      this.props.onFormaDePagoSelected(formaDePago, this.props.basket);\n    };\n\n    this.envioHandler = event => {\n      let formaDeEnvio = event.target.value;\n      this.props.onSelectFormaDeEnvio(formaDeEnvio);\n    };\n\n    this.submitingBeforeCompleteHandler = event => {\n      event.preventDefault();\n      this.setState({\n        submitingBeforeComplete: !this.state.submitingBeforeComplete\n      });\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.formaDePago !== nextProps.formaDePago || this.props.formaDeEnvio !== nextProps.formaDeEnvio || this.state !== nextState) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  checkValidity(value, rules) {\n    let isValid = true;\n\n    if (rules.required) {\n      isValid = value.trim() !== \"\" && isValid;\n    }\n\n    if (rules.minLength) {\n      isValid = value.length >= rules.minLength && isValid;\n    }\n\n    return isValid;\n  }\n\n  inputChangeHandler(event, inputIdentifier) {\n    const updatedOrderForm = { ...this.state.orderForm\n    };\n    const updatedFormElement = { ...updatedOrderForm[inputIdentifier]\n    };\n    updatedFormElement.value = event.target.value;\n    updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);\n    updatedFormElement.touched = true;\n    updatedOrderForm[inputIdentifier] = updatedFormElement;\n\n    if (inputIdentifier === 'provincia') {\n      this.props.onProvinciaSelected(updatedOrderForm[inputIdentifier].value);\n    }\n\n    let formIsValid = true;\n\n    for (let inputIdentifier in updatedOrderForm) {\n      formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;\n    }\n\n    this.setState({\n      orderForm: updatedOrderForm,\n      formIsValid: formIsValid\n    });\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    const arrayClasses = [classes.submitBtn, classes.disabled];\n    const formElementsArray = [];\n\n    for (let key in this.state.orderForm) {\n      formElementsArray.push({\n        id: key,\n        config: this.state.orderForm[key]\n      });\n    }\n\n    let form = /*#__PURE__*/React.createElement(\"form\", {\n      className: classes.ContactData,\n      onSubmit: this.props.formaDeEnvio !== null && this.props.formaDePago !== null && this.props.basket.length !== 0 && this.state.formIsValid ? this.showPriceModalHandler : this.submitingBeforeCompleteHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 7\n      }\n    }, this.state.submitingBeforeComplete ? /*#__PURE__*/React.createElement(Modal, {\n      modalClosed: this.submitingBeforeCompleteHandler,\n      show: this.state.submitingBeforeComplete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 52\n      }\n    }, \"Por favor, complete todos los datos requeridos antes de enviar el formulario\")) : null, /*#__PURE__*/React.createElement(CardOptionsEnvio, {\n      formaDeEnvio: this.props.formaDeEnvio,\n      envioSelected: this.envioHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      className: classes.datosContacto,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }\n    }, \"Datos de contacto\"), formElementsArray.map(formElement => {\n      return this.props.formaDeEnvio === \"Retiro\" && formElement.id === 'provincia' ? null : /*#__PURE__*/React.createElement(React.Fragment, {\n        key: formElement.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }\n      }, this.props.formaDeEnvio === \"A convenir\" && formElement.id === 'provincia' ? /*#__PURE__*/React.createElement(\"p\", {\n        className: classes.formInputEnvioMsj,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 17\n        }\n      }, \"Elija la provincia de envio:\") : null, /*#__PURE__*/React.createElement(Input, {\n        key: formElement.id,\n        elementType: formElement.config.elementType,\n        elementConfig: formElement.config.elementConfig,\n        value: formElement.config.value,\n        invalid: !formElement.config.valid,\n        shouldValidate: formElement.config.validation,\n        touched: formElement.config.touched,\n        changed: event => this.inputChangeHandler(event, formElement.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 15\n        }\n      }));\n    }), /*#__PURE__*/React.createElement(CardOptionsPagos, {\n      formaDePago: this.props.formaDePago,\n      formaDePagoSelected: this.pagoHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }\n    }), this.props.formaDePago === \"Transferencia Bancaria\" ? /*#__PURE__*/React.createElement(\"p\", {\n      className: classes.discountMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }\n    }, \"Se le aplic\\xF3 un 20% de descuento.\") : null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: this.props.formaDeEnvio !== null && this.props.formaDePago !== null && this.props.basket.length !== 0 && this.state.formIsValid ? arrayClasses[0] : arrayClasses.join(\" \"),\n      disabled: this.props.formaDeEnvio === null && this.props.formaDePago === null && !this.state.formIsValid && this.props.basket.length === 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }\n    }, \"Proceder al pago\"), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showPriceModal,\n      modalClosed: this.showPriceModalHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.pagoMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.envioMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }\n    }, \"Forma de Env\\xEDo: \", this.props.formaDeEnvio, this.state.orderForm.provincia.value !== 'G.B.A (Gran Buenos Aires)' || this.state.orderForm.provincia.value === \"C.A.B.A\" ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }\n    }, \"+ $400\") : null, this.props.formaDeEnvio === \"A convenir\" ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 10\n      }\n    }, \"Provincia: \", this.state.orderForm.provincia.value) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.formaDePagoMessage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 8\n      }\n    }, \"Forma de Pago: \", this.props.formaDePago, this.props.formaDePago === \"Transferencia Bancaria\" ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 63\n      }\n    }, \"- 20%\") : null), /*#__PURE__*/React.createElement(CurrencyFormat, {\n      renderText: value => {\n        return /*#__PURE__*/React.createElement(\"h3\", {\n          className: classes.precioFinalMessage,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 16\n          }\n        }, \"Precio Final: \", value);\n      },\n      decimalScale: 2,\n      value: this.props.price //Homework\n      ,\n      displayType: \"text\",\n      thousandSeparator: true,\n      prefix: \"$\",\n      fixedDecimalScale: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: classes.ModalBtn,\n      onClick: this.orderHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }\n    }, \"Ir a Pagar\")));\n\n    if (this.state.loading) {\n      form = /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Auxiliary, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 12\n      }\n    }, form);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    basket: state.carrito.basket,\n    price: state.carrito.totalPrice,\n    formaDePago: state.carrito.formaDePago,\n    formaDeEnvio: state.carrito.formaDeEnvio\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onCreateOrder: order => dispatch(actions.onCreateOrder(order)),\n    onFormaDePagoSelected: (formaDePago, basket) => dispatch(actions.onSelectFormaDePago(formaDePago, basket)),\n    onSelectFormaDeEnvio: formaDeEnvio => dispatch(actions.onSelectFormaDeEnvio(formaDeEnvio)),\n    onProvinciaSelected: provincia => dispatch(actions.onProvinciaSelected(provincia))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(withErrorHandler(ContactData, axios))); //this.props.basket.length === 0 &&","map":{"version":3,"sources":["C:/Users/Juan/Desktop/paginanook/nookweb/src/containers/Carrito/ContactData/ContactData.js"],"names":["React","Component","withErrorHandler","Input","classes","connect","Auxiliary","axios","withRouter","Spinner","CardOptionsEnvio","CardOptionsPagos","actions","Modal","CurrencyFormat","format","ContactData","_isMounted","state","orderForm","nombre","elementType","elementConfig","type","placeholder","value","validation","required","valid","touched","email","telefono","provincia","option","displayValue","formIsValid","loading","submitingBeforeComplete","showPriceModal","showPriceModalHandler","event","preventDefault","setState","mercadoPago","order","freeShipping","shippingCost","formaDeEnvio","includes","orderData","orderItems","i","basket","length","item","title","modelo","unit_price","precioParticular","quantity","cantidad","push","postData","items","name","number","shipments","cost","total_amount","price","post","headers","Authorization","data","then","response","window","location","orderHandler","formData","formElementIdentifier","date","Date","time","props","formaDePago","pagado","entregado","onCreateOrder","responseData","history","catch","error","console","log","pagoHandler","target","onFormaDePagoSelected","envioHandler","onSelectFormaDeEnvio","submitingBeforeCompleteHandler","shouldComponentUpdate","nextProps","nextState","componentDidMount","checkValidity","rules","isValid","trim","minLength","inputChangeHandler","inputIdentifier","updatedOrderForm","updatedFormElement","onProvinciaSelected","componentWillUnmount","render","arrayClasses","submitBtn","disabled","formElementsArray","key","id","config","form","datosContacto","map","formElement","formInputEnvioMsj","discountMessage","join","pagoMessage","envioMessage","formaDePagoMessage","precioFinalMessage","ModalBtn","mapStateToProps","carrito","totalPrice","mapDispatchToProps","dispatch","onSelectFormaDePago"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,gBAAP,MAA6B,kDAA7B;AACA,OAAOC,KAAP,MAAkB,sCAAlB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,OAAP,MAAoB,0CAApB;AACA,OAAOC,gBAAP,MAA6B,4DAA7B;AACA,OAAOC,gBAAP,MAA6B,2DAA7B;AACA,OAAO,KAAKC,OAAZ,MAAyB,gCAAzB;AACA,OAAOC,KAAP,MAAkB,sCAAlB;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AAEA,SAASC,MAAT,QAAuB,UAAvB;;AAEA,MAAMC,WAAN,SAA0Bf,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAClCgB,UADkC,GACvB,KADuB;AAAA,SAElCC,KAFkC,GAE1B;AACNC,MAAAA,SAAS,EAAE;AACTC,QAAAA,MAAM,EAAE;AACNC,UAAAA,WAAW,EAAE,OADP;AAENC,UAAAA,aAAa,EAAE;AACbC,YAAAA,IAAI,EAAE,MADO;AAEbC,YAAAA,WAAW,EAAE;AAFA,WAFT;AAMNC,UAAAA,KAAK,EAAE,EAND;AAONC,UAAAA,UAAU,EAAE;AACVC,YAAAA,QAAQ,EAAE;AADA,WAPN;AAUNC,UAAAA,KAAK,EAAE,KAVD;AAWNC,UAAAA,OAAO,EAAE;AAXH,SADC;AAeTC,QAAAA,KAAK,EAAE;AACLT,UAAAA,WAAW,EAAE,OADR;AAELC,UAAAA,aAAa,EAAE;AACbC,YAAAA,IAAI,EAAE,OADO;AAEbC,YAAAA,WAAW,EAAE;AAFA,WAFV;AAMLC,UAAAA,KAAK,EAAE,EANF;AAOLC,UAAAA,UAAU,EAAE;AACVC,YAAAA,QAAQ,EAAE;AADA,WAPP;AAULC,UAAAA,KAAK,EAAE,KAVF;AAWLC,UAAAA,OAAO,EAAE;AAXJ,SAfE;AA4BTE,QAAAA,QAAQ,EAAE;AACRV,UAAAA,WAAW,EAAE,OADL;AAERC,UAAAA,aAAa,EAAE;AACbC,YAAAA,IAAI,EAAE,MADO;AAEbC,YAAAA,WAAW,EAAE;AAFA,WAFP;AAMRC,UAAAA,KAAK,EAAE,EANC;AAORC,UAAAA,UAAU,EAAE;AACVC,YAAAA,QAAQ,EAAE;AADA,WAPJ;AAURC,UAAAA,KAAK,EAAE,KAVC;AAWRC,UAAAA,OAAO,EAAE;AAXD,SA5BD;AAyCTG,QAAAA,SAAS,EAAE;AACTX,UAAAA,WAAW,EAAE,QADJ;AAETC,UAAAA,aAAa,EAAE;AACbW,YAAAA,MAAM,EAAE,CACN;AACER,cAAAA,KAAK,EAAE,2BADT;AAEES,cAAAA,YAAY,EAAE;AAFhB,aADM,EAKN;AACET,cAAAA,KAAK,EAAE,uBADT;AAEES,cAAAA,YAAY,EAAE;AAFhB,aALM,EASN;AAAET,cAAAA,KAAK,EAAE,WAAT;AAAsBS,cAAAA,YAAY,EAAE;AAApC,aATM,EAUN;AAAET,cAAAA,KAAK,EAAE,SAAT;AAAoBS,cAAAA,YAAY,EAAE;AAAlC,aAVM,EAWN;AAAET,cAAAA,KAAK,EAAE,OAAT;AAAkBS,cAAAA,YAAY,EAAE;AAAhC,aAXM,EAYN;AAAET,cAAAA,KAAK,EAAE,QAAT;AAAmBS,cAAAA,YAAY,EAAE;AAAjC,aAZM,EAaN;AAAET,cAAAA,KAAK,EAAE,SAAT;AAAoBS,cAAAA,YAAY,EAAE;AAAlC,aAbM,EAcN;AAAET,cAAAA,KAAK,EAAE,YAAT;AAAuBS,cAAAA,YAAY,EAAE;AAArC,aAdM,EAeN;AAAET,cAAAA,KAAK,EAAE,YAAT;AAAuBS,cAAAA,YAAY,EAAE;AAArC,aAfM,EAgBN;AAAET,cAAAA,KAAK,EAAE,SAAT;AAAoBS,cAAAA,YAAY,EAAE;AAAlC,aAhBM,EAiBN;AAAET,cAAAA,KAAK,EAAE,OAAT;AAAkBS,cAAAA,YAAY,EAAE;AAAhC,aAjBM,EAkBN;AAAET,cAAAA,KAAK,EAAE,UAAT;AAAqBS,cAAAA,YAAY,EAAE;AAAnC,aAlBM,EAmBN;AAAET,cAAAA,KAAK,EAAE,UAAT;AAAqBS,cAAAA,YAAY,EAAE;AAAnC,aAnBM,EAoBN;AAAET,cAAAA,KAAK,EAAE,SAAT;AAAoBS,cAAAA,YAAY,EAAE;AAAlC,aApBM,EAqBN;AAAET,cAAAA,KAAK,EAAE,UAAT;AAAqBS,cAAAA,YAAY,EAAE;AAAnC,aArBM,EAsBN;AAAET,cAAAA,KAAK,EAAE,SAAT;AAAoBS,cAAAA,YAAY,EAAE;AAAlC,aAtBM,EAuBN;AAAET,cAAAA,KAAK,EAAE,WAAT;AAAsBS,cAAAA,YAAY,EAAE;AAApC,aAvBM,EAwBN;AAAET,cAAAA,KAAK,EAAE,OAAT;AAAkBS,cAAAA,YAAY,EAAE;AAAhC,aAxBM,EAyBN;AAAET,cAAAA,KAAK,EAAE,UAAT;AAAqBS,cAAAA,YAAY,EAAE;AAAnC,aAzBM,EA0BN;AAAET,cAAAA,KAAK,EAAE,UAAT;AAAqBS,cAAAA,YAAY,EAAE;AAAnC,aA1BM,EA2BN;AAAET,cAAAA,KAAK,EAAE,YAAT;AAAuBS,cAAAA,YAAY,EAAE;AAArC,aA3BM,EA4BN;AAAET,cAAAA,KAAK,EAAE,UAAT;AAAqBS,cAAAA,YAAY,EAAE;AAAnC,aA5BM,EA6BN;AAAET,cAAAA,KAAK,EAAE,iBAAT;AAA4BS,cAAAA,YAAY,EAAE;AAA1C,aA7BM,EA8BN;AAAET,cAAAA,KAAK,EAAE,kBAAT;AAA6BS,cAAAA,YAAY,EAAE;AAA3C,aA9BM,EA+BN;AAAET,cAAAA,KAAK,EAAE,SAAT;AAAoBS,cAAAA,YAAY,EAAE;AAAlC,aA/BM;AADK,WAFN;AAqCTT,UAAAA,KAAK,EAAE,2BArCE;AAsCTC,UAAAA,UAAU,EAAE;AACVC,YAAAA,QAAQ,EAAE;AADA,WAtCH;AAyCTC,UAAAA,KAAK,EAAE,IAzCE;AA0CTC,UAAAA,OAAO,EAAE;AA1CA;AAzCF,OADL;AAuFNM,MAAAA,WAAW,EAAE,KAvFP;AAwFNC,MAAAA,OAAO,EAAE,KAxFH;AAyFNC,MAAAA,uBAAuB,EAAE,KAzFnB;AA0FNC,MAAAA,cAAc,EAAE;AA1FV,KAF0B;;AAAA,SA6GlCC,qBA7GkC,GA6GTC,KAAD,IAAS;AAC/BA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AAACJ,QAAAA,cAAc,EAAE,CAAC,KAAKpB,KAAL,CAAWoB;AAA7B,OAAd;AACD,KAhHiC;;AAAA,SAkHlCK,WAlHkC,GAkHnBC,KAAD,IAAW;AACvB,YAAMC,YAAY,GAAG,CAAC,SAAD,EAAY,2BAAZ,CAArB;AACA,UAAIC,YAAY,GAAKF,KAAK,CAACG,YAAN,KAAuB,YAAvB,IAAuC,CAACF,YAAY,CAACG,QAAb,CAAsBJ,KAAK,CAACK,SAAN,CAAgBjB,SAAtC,CAAxC,GAA2F,GAA3F,GAAiG,CAAtH;AACA,UAAIkB,UAAU,GAAC,EAAf;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAACP,KAAK,CAACQ,MAAN,CAAaC,MAA7B,EAAoCF,CAAC,EAArC,EAAwC;AACtC,YAAIG,IAAI,GAAG;AACTC,UAAAA,KAAK,EAAEX,KAAK,CAACQ,MAAN,CAAaD,CAAb,EAAgBK,MADd;AAETC,UAAAA,UAAU,EAAEb,KAAK,CAACQ,MAAN,CAAaD,CAAb,EAAgBO,gBAFnB;AAGTC,UAAAA,QAAQ,EAAEf,KAAK,CAACQ,MAAN,CAAaD,CAAb,EAAgBS;AAHjB,SAAX;AAKAV,QAAAA,UAAU,CAACW,IAAX,CAAgBP,IAAhB;AACD;;AACD,UAAIQ,QAAQ,GAAG;AACbC,QAAAA,KAAK,EAAE,CACLb,UADK,CADM;AAIbc,QAAAA,IAAI,EAAEpB,KAAK,CAACK,SAAN,CAAgB7B,MAJT;AAKbU,QAAAA,KAAK,EAAEc,KAAK,CAACK,SAAN,CAAgBnB,KALV;AAMbmC,QAAAA,MAAM,EAAErB,KAAK,CAACK,SAAN,CAAgBlB,QANX;AAObmC,QAAAA,SAAS,EAAC;AACRC,UAAAA,IAAI,EAAErB;AADE,SAPG;AAUbsB,QAAAA,YAAY,EAAExB,KAAK,CAACyB,KAAN,GAAcvB;AAVf,OAAf;AAYAvC,MAAAA,KAAK,CAAC+D,IAAN,CAAW,8DAAX,EAA2E;AACzEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE;AADR,SADgE;AAIzEC,QAAAA,IAAI,EAAEX,QAJmE;AAKzElB,QAAAA,KAAK,EAAEA;AALkE,OAA3E,EAOC8B,IAPD,CAOM,UAAUC,QAAV,EAAoB;AACxB,aAAKjC,QAAL,CAAc;AAAEN,UAAAA,OAAO,EAAE;AAAX,SAAd;AACA,eAAQwC,MAAM,CAACC,QAAP,GAAkBF,QAAQ,CAACF,IAAnC;AACD,OAVD;AAWD,KArJiC;;AAAA,SAyJnCK,YAzJmC,GAyJnBtC,KAAD,IAAW;AACvB,WAAKE,QAAL,CAAc;AAAEN,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAI,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMsC,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAIC,qBAAT,IAAkC,KAAK9D,KAAL,CAAWC,SAA7C,EAAwD;AACtD4D,QAAAA,QAAQ,CAACC,qBAAD,CAAR,GAAkC,KAAK9D,KAAL,CAAWC,SAAX,CAChC6D,qBADgC,EAEhCvD,KAFF;AAGD;;AAED,UAAIwD,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACD,UAAIC,IAAI,GAAGpE,MAAM,CAACkE,IAAD,EAAO,qBAAP,CAAjB;AACC,YAAMrC,KAAK,GAAG;AACZQ,QAAAA,MAAM,EAAE,KAAKgC,KAAL,CAAWhC,MADP;AAEZiB,QAAAA,KAAK,EAAE,KAAKe,KAAL,CAAWf,KAFN;AAGZpB,QAAAA,SAAS,EAAE8B,QAHC;AAIZM,QAAAA,WAAW,EAAE,KAAKD,KAAL,CAAWC,WAJZ;AAKZtC,QAAAA,YAAY,EAAE,KAAKqC,KAAL,CAAWrC,YALb;AAMZuC,QAAAA,MAAM,EAAE,KANI;AAOZC,QAAAA,SAAS,EAAE,KAPC;AAQZN,QAAAA,IAAI,EAAEE;AARM,OAAd;AAWA,WAAKC,KAAL,CAAWI,aAAX,CAAyB5C,KAAzB,EAvBuB,CAwBvB;;AAEArC,MAAAA,KAAK,CACF+D,IADH,CACQ,cADR,EACwB1B,KADxB,EAEG8B,IAFH,CAESC,QAAD,IAAc;AAClB,YAAG,KAAK1D,UAAR,EAAmB,CAElB;AACF,OANH,EAOGyD,IAPH,CAOQe,YAAY,IAAG;AACrB,YAAG,KAAKxE,UAAL,IAAmB2B,KAAK,CAACyC,WAAN,KAAsB,wBAA5C,EAAqE;AACnE,eAAK3C,QAAL,CAAc;AAAEN,YAAAA,OAAO,EAAE;AAAX,WAAd;AACD,iBAAO,KAAKgD,KAAL,CAAWM,OAAX,CAAmB7B,IAAnB,CAAwB,QAAxB,CAAP;AACA,SAHD,MAGK;AACH,iBAAO,KAAKlB,WAAL,CAAiBC,KAAjB,CAAP;AACD;AACA,OAdH,EAeG+C,KAfH,CAeUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAfpB,EA1BuB,CAyCkB;AAC1C,KAnMiC;;AAAA,SAiPlCG,WAjPkC,GAiPnBvD,KAAD,IAAW;AACvB,UAAI6C,WAAW,GAAG7C,KAAK,CAACwD,MAAN,CAAavE,KAA/B;AACA,WAAK2D,KAAL,CAAWa,qBAAX,CAAiCZ,WAAjC,EAA8C,KAAKD,KAAL,CAAWhC,MAAzD;AACD,KApPiC;;AAAA,SAsPlC8C,YAtPkC,GAsPnB1D,KAAD,IAAU;AACtB,UAAIO,YAAY,GAAGP,KAAK,CAACwD,MAAN,CAAavE,KAAhC;AACA,WAAK2D,KAAL,CAAWe,oBAAX,CAAgCpD,YAAhC;AACD,KAzPiC;;AAAA,SA2PlCqD,8BA3PkC,GA2PA5D,KAAD,IAAU;AACzCA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AAACL,QAAAA,uBAAuB,EAAE,CAAC,KAAKnB,KAAL,CAAWmB;AAAtC,OAAd;AACD,KA9PiC;AAAA;;AA+FlCgE,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,SAAZ,EAAsB;AACzC,QAAG,KAAKnB,KAAL,CAAWC,WAAX,KAA2BiB,SAAS,CAACjB,WAArC,IACE,KAAKD,KAAL,CAAWrC,YAAX,KAA4BuD,SAAS,CAACvD,YADxC,IAEE,KAAK7B,KAAL,KAAeqF,SAFpB,EAE8B;AAC5B,aAAO,IAAP;AACD,KAJD,MAIK;AACH,aAAO,KAAP;AACD;AACF;;AAEDC,EAAAA,iBAAiB,GAAE;AACjB,SAAKvF,UAAL,GAAgB,IAAhB;AACD;;AA0FDwF,EAAAA,aAAa,CAAChF,KAAD,EAAQiF,KAAR,EAAc;AACzB,QAAIC,OAAO,GAAG,IAAd;;AAEA,QAAID,KAAK,CAAC/E,QAAV,EAAoB;AAClBgF,MAAAA,OAAO,GAAGlF,KAAK,CAACmF,IAAN,OAAiB,EAAjB,IAAuBD,OAAjC;AACD;;AAED,QAAID,KAAK,CAACG,SAAV,EAAqB;AACnBF,MAAAA,OAAO,GAAGlF,KAAK,CAAC4B,MAAN,IAAgBqD,KAAK,CAACG,SAAtB,IAAmCF,OAA7C;AACD;;AAED,WAAOA,OAAP;AACD;;AAEDG,EAAAA,kBAAkB,CAACtE,KAAD,EAAQuE,eAAR,EAAwB;AACxC,UAAMC,gBAAgB,GAAG,EACvB,GAAG,KAAK9F,KAAL,CAAWC;AADS,KAAzB;AAGA,UAAM8F,kBAAkB,GAAG,EACzB,GAAGD,gBAAgB,CAACD,eAAD;AADM,KAA3B;AAIAE,IAAAA,kBAAkB,CAACxF,KAAnB,GAA2Be,KAAK,CAACwD,MAAN,CAAavE,KAAxC;AACAwF,IAAAA,kBAAkB,CAACrF,KAAnB,GAA2B,KAAK6E,aAAL,CACzBQ,kBAAkB,CAACxF,KADM,EAEzBwF,kBAAkB,CAACvF,UAFM,CAA3B;AAIAuF,IAAAA,kBAAkB,CAACpF,OAAnB,GAA6B,IAA7B;AAEAmF,IAAAA,gBAAgB,CAACD,eAAD,CAAhB,GAAoCE,kBAApC;;AAEH,QAAGF,eAAe,KAAI,WAAtB,EAAkC;AAChC,WAAK3B,KAAL,CAAW8B,mBAAX,CAA+BF,gBAAgB,CAACD,eAAD,CAAhB,CAAkCtF,KAAjE;AACD;;AAIE,QAAIU,WAAW,GAAG,IAAlB;;AACA,SAAK,IAAI4E,eAAT,IAA4BC,gBAA5B,EAA8C;AAC5C7E,MAAAA,WAAW,GAAG6E,gBAAgB,CAACD,eAAD,CAAhB,CAAkCnF,KAAlC,IAA2CO,WAAzD;AACD;;AACD,SAAKO,QAAL,CAAc;AAAEvB,MAAAA,SAAS,EAAE6F,gBAAb;AAA+B7E,MAAAA,WAAW,EAAEA;AAA5C,KAAd;AACD;;AAiBDgF,EAAAA,oBAAoB,GAAE;AAClB,SAAKlG,UAAL,GAAgB,KAAhB;AAEH;;AAIDmG,EAAAA,MAAM,GAAG;AACP,UAAMC,YAAY,GAAG,CAACjH,OAAO,CAACkH,SAAT,EAAoBlH,OAAO,CAACmH,QAA5B,CAArB;AACA,UAAMC,iBAAiB,GAAG,EAA1B;;AACA,SAAK,IAAIC,GAAT,IAAgB,KAAKvG,KAAL,CAAWC,SAA3B,EAAsC;AACpCqG,MAAAA,iBAAiB,CAAC3D,IAAlB,CAAuB;AACrB6D,QAAAA,EAAE,EAAED,GADiB;AAErBE,QAAAA,MAAM,EAAE,KAAKzG,KAAL,CAAWC,SAAX,CAAqBsG,GAArB;AAFa,OAAvB;AAID;;AAED,QAAIG,IAAI,gBACN;AAAM,MAAA,SAAS,EAAExH,OAAO,CAACY,WAAzB;AAAsC,MAAA,QAAQ,EAC5C,KAAKoE,KAAL,CAAWrC,YAAX,KAA4B,IAA5B,IACA,KAAKqC,KAAL,CAAWC,WAAX,KAA2B,IAD3B,IAEA,KAAKD,KAAL,CAAWhC,MAAX,CAAkBC,MAAlB,KAA6B,CAF7B,IAGA,KAAKnC,KAAL,CAAWiB,WAHX,GAIA,KAAKI,qBAJL,GAI4B,KAAK6D,8BALnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQG,KAAKlF,KAAL,CAAWmB,uBAAX,gBACA,oBAAC,KAAD;AACA,MAAA,WAAW,EAAE,KAAK+D,8BADlB;AAEA,MAAA,IAAI,EAAE,KAAKlF,KAAL,CAAWmB,uBAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAE0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sFAF1C,CADA,GAGwI,IAX3I,eAaE,oBAAC,gBAAD;AAAkB,MAAA,YAAY,EAAE,KAAK+C,KAAL,CAAWrC,YAA3C;AAAyD,MAAA,aAAa,EAAE,KAAKmD,YAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbF,eAcE;AAAI,MAAA,SAAS,EAAE9F,OAAO,CAACyH,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAdF,EAeGL,iBAAiB,CAACM,GAAlB,CAAuBC,WAAD,IAAiB;AACtC,aAAO,KAAK3C,KAAL,CAAWrC,YAAX,KAA4B,QAA5B,IAAwCgF,WAAW,CAACL,EAAZ,KAAmB,WAA3D,GACL,IADK,gBAEL,oBAAC,KAAD,CAAO,QAAP;AAAgB,QAAA,GAAG,EAAEK,WAAW,CAACL,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,KAAKtC,KAAL,CAAWrC,YAAX,KAA4B,YAA5B,IAA4CgF,WAAW,CAACL,EAAZ,KAAmB,WAA/D,gBACA;AAAG,QAAA,SAAS,EAAEtH,OAAO,CAAC4H,iBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADA,GAC4E,IAHhF,eAKE,oBAAC,KAAD;AACD,QAAA,GAAG,EAAED,WAAW,CAACL,EADhB;AAED,QAAA,WAAW,EAAEK,WAAW,CAACJ,MAAZ,CAAmBtG,WAF/B;AAGD,QAAA,aAAa,EAAE0G,WAAW,CAACJ,MAAZ,CAAmBrG,aAHjC;AAID,QAAA,KAAK,EAAEyG,WAAW,CAACJ,MAAZ,CAAmBlG,KAJzB;AAKD,QAAA,OAAO,EAAE,CAACsG,WAAW,CAACJ,MAAZ,CAAmB/F,KAL5B;AAMD,QAAA,cAAc,EAAEmG,WAAW,CAACJ,MAAZ,CAAmBjG,UANlC;AAOD,QAAA,OAAO,EAAEqG,WAAW,CAACJ,MAAZ,CAAmB9F,OAP3B;AAQD,QAAA,OAAO,EAAGW,KAAD,IACP,KAAKsE,kBAAL,CAAwBtE,KAAxB,EAA+BuF,WAAW,CAACL,EAA3C,CATD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CAFF;AAuBD,KAxBA,CAfH,eAyCE,oBAAC,gBAAD;AAAkB,MAAA,WAAW,EAAE,KAAKtC,KAAL,CAAWC,WAA1C;AAAuD,MAAA,mBAAmB,EAAE,KAAKU,WAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzCF,EA0CG,KAAKX,KAAL,CAAWC,WAAX,KAA2B,wBAA3B,gBACD;AAAG,MAAA,SAAS,EAAEjF,OAAO,CAAC6H,eAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADC,GAC8E,IA3CjF,eA4CE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,SAAS,EACP,KAAK7C,KAAL,CAAWrC,YAAX,KAA4B,IAA5B,IACA,KAAKqC,KAAL,CAAWC,WAAX,KAA2B,IAD3B,IAEA,KAAKD,KAAL,CAAWhC,MAAX,CAAkBC,MAAlB,KAA6B,CAF7B,IAGA,KAAKnC,KAAL,CAAWiB,WAHX,GAIIkF,YAAY,CAAC,CAAD,CAJhB,GAKIA,YAAY,CAACa,IAAb,CAAkB,GAAlB,CARR;AAUE,MAAA,QAAQ,EACN,KAAK9C,KAAL,CAAWrC,YAAX,KAA4B,IAA5B,IACA,KAAKqC,KAAL,CAAWC,WAAX,KAA2B,IAD3B,IAEA,CAAC,KAAKnE,KAAL,CAAWiB,WAFZ,IAGA,KAAKiD,KAAL,CAAWhC,MAAX,CAAkBC,MAAlB,KAA6B,CAdjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BA5CF,eA+DE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAKnC,KAAL,CAAWoB,cAAxB;AAAwC,MAAA,WAAW,EAAE,KAAKC,qBAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAEnC,OAAO,CAAC+H,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACF;AAAK,MAAA,SAAS,EAAE/H,OAAO,CAACgI,YAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAuD,KAAKhD,KAAL,CAAWrC,YAAlE,EAEA,KAAK7B,KAAL,CAAWC,SAAX,CAAqBa,SAArB,CAA+BP,KAA/B,KAAyC,2BAAzC,IAAwE,KAAKP,KAAL,CAAWC,SAAX,CAAqBa,SAArB,CAA+BP,KAA/B,KAA0C,SAAlH,gBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,GACsB,IAHtB,EAKC,KAAK2D,KAAL,CAAWrC,YAAX,KAA4B,YAA5B,gBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAe,KAAK7B,KAAL,CAAWC,SAAX,CAAqBa,SAArB,CAA+BP,KAA9C,CADA,GAC0D,IAN3D,CADE,eAUH;AAAK,MAAA,SAAS,EAAErB,OAAO,CAACiI,kBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA4D,KAAKjD,KAAL,CAAWC,WAAvE,EACC,KAAKD,KAAL,CAAWC,WAAX,KAA2B,wBAA3B,gBAAsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAtD,GAA2E,IAD5E,CAVG,eAaH,oBAAC,cAAD;AACS,MAAA,UAAU,EAAG5D,KAAD,IAAS;AACjB,4BACL;AAAI,UAAA,SAAS,EAAErB,OAAO,CAACkI,kBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAA0D7G,KAA1D,CADK;AAGH,OALV;AAMS,MAAA,YAAY,EAAE,CANvB;AAOS,MAAA,KAAK,EAAE,KAAK2D,KAAL,CAAWf,KAP3B,CAOkC;AAPlC;AAQS,MAAA,WAAW,EAAE,MARtB;AASS,MAAA,iBAAiB,EAAE,IAT5B;AAUS,MAAA,MAAM,EAAE,GAVjB;AAWS,MAAA,iBAAiB,EAAE,IAX5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbG,CADF,eA6BE;AAAQ,MAAA,SAAS,EAAEjE,OAAO,CAACmI,QAA3B;AAAoC,MAAA,OAAO,EAAE,KAAKzD,YAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA7BF,CA/DF,CADF;;AAmGA,QAAI,KAAK5D,KAAL,CAAWkB,OAAf,EAAwB;AACtBwF,MAAAA,IAAI,gBAAG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;;AAED,wBAAO,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,IAAZ,CAAP;AACD;;AAzXiC;;AA4XpC,MAAMY,eAAe,GAAItH,KAAD,IAAW;AACjC,SAAO;AACLkC,IAAAA,MAAM,EAAElC,KAAK,CAACuH,OAAN,CAAcrF,MADjB;AAELiB,IAAAA,KAAK,EAAEnD,KAAK,CAACuH,OAAN,CAAcC,UAFhB;AAGLrD,IAAAA,WAAW,EAAEnE,KAAK,CAACuH,OAAN,CAAcpD,WAHtB;AAILtC,IAAAA,YAAY,EAAE7B,KAAK,CAACuH,OAAN,CAAc1F;AAJvB,GAAP;AAMD,CAPD;;AASA,MAAM4F,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLpD,IAAAA,aAAa,EAAG5C,KAAD,IAAWgG,QAAQ,CAAChI,OAAO,CAAC4E,aAAR,CAAsB5C,KAAtB,CAAD,CAD7B;AAELqD,IAAAA,qBAAqB,EAAE,CAACZ,WAAD,EAAcjC,MAAd,KACrBwF,QAAQ,CAAChI,OAAO,CAACiI,mBAAR,CAA4BxD,WAA5B,EAAyCjC,MAAzC,CAAD,CAHL;AAIL+C,IAAAA,oBAAoB,EAAGpD,YAAD,IAAgB6F,QAAQ,CAAChI,OAAO,CAACuF,oBAAR,CAA6BpD,YAA7B,CAAD,CAJzC;AAKLmE,IAAAA,mBAAmB,EAAGlF,SAAD,IAAe4G,QAAQ,CAAChI,OAAO,CAACsG,mBAAR,CAA4BlF,SAA5B,CAAD;AALvC,GAAP;AAOD,CARD;;AAUA,eAAe3B,OAAO,CACpBmI,eADoB,EAEpBG,kBAFoB,CAAP,CAGbnI,UAAU,CAACN,gBAAgB,CAACc,WAAD,EAAcT,KAAd,CAAjB,CAHG,CAAf,C,CAKA","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport withErrorHandler from \"./../../../hoc/withErrorHandler/withErrorHandler\";\r\nimport Input from \"./../../../components/Ul/input/input\";\r\nimport classes from \"./ContactData.module.css\";\r\nimport { connect } from \"react-redux\";\r\nimport Auxiliary from \"./../../../hoc/Auxiliary\";\r\nimport axios from \"./../../../axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Spinner from \"./../../../components/Ul/Spinner/Spinner\";\r\nimport CardOptionsEnvio from './../../../components/Ul/CardOptionsEnvio/CardOptionsEnvio';\r\nimport CardOptionsPagos from './../../../components/Ul/CardOptionPagos/CardOptionsPagos';\r\nimport * as actions from \"./../../../store/actions/index\";\r\nimport Modal from './../../../components/Ul/Modal/Modal';\r\nimport CurrencyFormat from 'react-currency-format';\r\n\r\nimport { format } from \"date-fns\";\r\n\r\nclass ContactData extends Component {\r\n  _isMounted=false;\r\n  state = {\r\n    orderForm: {\r\n      nombre: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Ingresa tu nombre y apellido\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      \r\n      email: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"email\",\r\n          placeholder: \"Ingresá tu email\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      telefono: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Telefono\",\r\n        },\r\n        value: \"\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: false,\r\n        touched: false,\r\n      },\r\n      provincia: {\r\n        elementType: \"select\",\r\n        elementConfig: {\r\n          option: [\r\n            {\r\n              value: \"G.B.A (Gran Buenos Aires)\",\r\n              displayValue: \"Gran Buenos Aires (G.B.A)\",\r\n            },\r\n            {\r\n              value: \"Buenos Aires Interior\",\r\n              displayValue: \"Buenos Aires Interior\",\r\n            },\r\n            { value: \"Catamarca\", displayValue: \"Catamarca\" },\r\n            { value: \"C.A.B.A\", displayValue: \"C.A.B.A\" },\r\n            { value: \"Chaco\", displayValue: \"Chaco\" },\r\n            { value: \"Chubut\", displayValue: \"Chubut\" },\r\n            { value: \"Cordoba\", displayValue: \"Cordoba\" },\r\n            { value: \"Corrientes\", displayValue: \"Corrientes\" },\r\n            { value: \"Entre Rios\", displayValue: \"Entre Rios\" },\r\n            { value: \"Formosa\", displayValue: \"Formosa\" },\r\n            { value: \"Jujuy\", displayValue: \"Jujuy\" },\r\n            { value: \"La Pampa\", displayValue: \"La Pampa\" },\r\n            { value: \"La Rioja\", displayValue: \"La Rioja\" },\r\n            { value: \"Mendoza\", displayValue: \"Mendoza\" },\r\n            { value: \"Misiones\", displayValue: \"Misiones\" },\r\n            { value: \"Neuquen\", displayValue: \"Neuquen\" },\r\n            { value: \"Rio Negro\", displayValue: \"Rio Negro\" },\r\n            { value: \"Salta\", displayValue: \"Salta\" },\r\n            { value: \"San Juan\", displayValue: \"San Juan\" },\r\n            { value: \"San Luis\", displayValue: \"San Luis\" },\r\n            { value: \"Santa Cruz\", displayValue: \"Santa Cruz\" },\r\n            { value: \"Santa Fe\", displayValue: \"Santa Fe\" },\r\n            { value: \"Sgo. del Estero\", displayValue: \"Sgo. del Estero\" },\r\n            { value: \"Tierra del Fuego\", displayValue: \"Tierra del Fuego\" },\r\n            { value: \"Tucuman\", displayValue: \"Tucuman\" },\r\n          ],\r\n        },\r\n        value: \"G.B.A (Gran Buenos Aires)\",\r\n        validation: {\r\n          required: true,\r\n        },\r\n        valid: true,\r\n        touched: false,\r\n      }\r\n    },\r\n    formIsValid: false,\r\n    loading: false,\r\n    submitingBeforeComplete: false,\r\n    showPriceModal: false\r\n  };\r\n\r\n  shouldComponentUpdate(nextProps, nextState){\r\n    if(this.props.formaDePago !== nextProps.formaDePago\r\n      || this.props.formaDeEnvio !== nextProps.formaDeEnvio\r\n      || this.state !== nextState){\r\n      return true\r\n    }else{\r\n      return false\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this._isMounted=true;\r\n  }\r\n\r\n  showPriceModalHandler = (event)=>{\r\n    event.preventDefault();\r\n    this.setState({showPriceModal: !this.state.showPriceModal})\r\n  }\r\n\r\n  mercadoPago = (order) => {\r\n    const freeShipping = [\"C.A.B.A\", \"G.B.A (Gran Buenos Aires)\"];\r\n    var shippingCost   = order.formaDeEnvio === \"A convenir\" && !freeShipping.includes(order.orderData.provincia) ? 400 : 0;\r\n    var orderItems=[];\r\n    for(var i = 0;i<order.basket.length;i++){\r\n      var item = {\r\n        title: order.basket[i].modelo,\r\n        unit_price: order.basket[i].precioParticular,\r\n        quantity: order.basket[i].cantidad,\r\n      };\r\n      orderItems.push(item);\r\n    }\r\n    var postData = {\r\n      items: [\r\n        orderItems,\r\n      ],\r\n      name: order.orderData.nombre,\r\n      email: order.orderData.email,\r\n      number: order.orderData.telefono,\r\n      shipments:{\r\n        cost: shippingCost,\r\n      },\r\n      total_amount: order.price + shippingCost,\r\n    };\r\n    axios.post('https://excited-excited-stealer.glitch.me/mercadopago/create', {\r\n      headers: {\r\n        Authorization: 'Access-Control-Allow-Headers\", \"X-Requested-With, content-type',\r\n      },\r\n      data: postData,\r\n      order: order,\r\n    })\r\n    .then(function (response) {\r\n      this.setState({ loading: false });\r\n      return  window.location = response.data;\r\n    })\r\n  }\r\n\r\n\r\n\r\n orderHandler = (event) => {\r\n    this.setState({ loading: true });\r\n    event.preventDefault();\r\n    const formData = {};\r\n    for (let formElementIdentifier in this.state.orderForm) {\r\n      formData[formElementIdentifier] = this.state.orderForm[\r\n        formElementIdentifier\r\n      ].value;\r\n    }\r\n\r\n    let date = new Date();\r\n   let time = format(date, \"dd/MM/yyyy HH:mm:ss\");\r\n    const order = {\r\n      basket: this.props.basket,\r\n      price: this.props.price,\r\n      orderData: formData,\r\n      formaDePago: this.props.formaDePago,\r\n      formaDeEnvio: this.props.formaDeEnvio,\r\n      pagado: false,\r\n      entregado: false,\r\n      date: time,\r\n    };\r\n\r\n    this.props.onCreateOrder(order)\r\n    // this.discountHandler(formData.provincia)\r\n\r\n    axios\r\n      .post(\"/orders.json\", order)\r\n      .then((response) => {\r\n        if(this._isMounted){\r\n          \r\n        }\r\n      })\r\n      .then(responseData =>{\r\n      if(this._isMounted && order.formaDePago === 'Transferencia Bancaria'){\r\n        this.setState({ loading: false });\r\n       return this.props.history.push(\"/pagos\")\r\n      }else{\r\n        return this.mercadoPago(order);\r\n      }\r\n      })\r\n      .catch((error) => console.log(error)); //this.props.onLoading());\r\n  }\r\n\r\n  checkValidity(value, rules){\r\n    let isValid = true;\r\n\r\n    if (rules.required) {\r\n      isValid = value.trim() !== \"\" && isValid;\r\n    }\r\n\r\n    if (rules.minLength) {\r\n      isValid = value.length >= rules.minLength && isValid;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  inputChangeHandler(event, inputIdentifier){\r\n    const updatedOrderForm = {\r\n      ...this.state.orderForm,\r\n    };\r\n    const updatedFormElement = {\r\n      ...updatedOrderForm[inputIdentifier],\r\n    };\r\n\r\n    updatedFormElement.value = event.target.value;\r\n    updatedFormElement.valid = this.checkValidity(\r\n      updatedFormElement.value,\r\n      updatedFormElement.validation\r\n    );\r\n    updatedFormElement.touched = true;\r\n    \r\n    updatedOrderForm[inputIdentifier] = updatedFormElement;\r\n\r\n if(inputIdentifier=== 'provincia'){\r\n   this.props.onProvinciaSelected(updatedOrderForm[inputIdentifier].value)\r\n }\r\n    \r\n  \r\n\r\n    let formIsValid = true;\r\n    for (let inputIdentifier in updatedOrderForm) {\r\n      formIsValid = updatedOrderForm[inputIdentifier].valid && formIsValid;\r\n    }\r\n    this.setState({ orderForm: updatedOrderForm, formIsValid: formIsValid });\r\n  };\r\n\r\n  pagoHandler = (event) => {\r\n    let formaDePago = event.target.value;\r\n    this.props.onFormaDePagoSelected(formaDePago, this.props.basket);\r\n  };\r\n\r\n  envioHandler =(event) =>{\r\n    let formaDeEnvio = event.target.value;\r\n    this.props.onSelectFormaDeEnvio(formaDeEnvio)\r\n  }\r\n\r\n  submitingBeforeCompleteHandler = (event) =>{\r\n    event.preventDefault();\r\n    this.setState({submitingBeforeComplete: !this.state.submitingBeforeComplete})\r\n  }\r\n\r\n  componentWillUnmount(){\r\n      this._isMounted=false;\r\n  \r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    const arrayClasses = [classes.submitBtn, classes.disabled];\r\n    const formElementsArray = [];\r\n    for (let key in this.state.orderForm) {\r\n      formElementsArray.push({\r\n        id: key,\r\n        config: this.state.orderForm[key],\r\n      });\r\n    }\r\n\r\n    let form = (\r\n      <form className={classes.ContactData} onSubmit={\r\n        this.props.formaDeEnvio !== null &&\r\n        this.props.formaDePago !== null &&\r\n        this.props.basket.length !== 0 &&\r\n        this.state.formIsValid ?\r\n        this.showPriceModalHandler: this.submitingBeforeCompleteHandler\r\n      }>\r\n        {\r\n         this.state.submitingBeforeComplete ? \r\n         <Modal \r\n         modalClosed={this.submitingBeforeCompleteHandler}\r\n         show={this.state.submitingBeforeComplete}><p>Por favor, complete todos los datos requeridos antes de enviar el formulario</p></Modal> : null\r\n        }\r\n        <CardOptionsEnvio formaDeEnvio={this.props.formaDeEnvio} envioSelected={this.envioHandler}/>\r\n        <h4 className={classes.datosContacto}>Datos de contacto</h4>\r\n        {formElementsArray.map((formElement) => {\r\n          return this.props.formaDeEnvio === \"Retiro\" && formElement.id === 'provincia' ?\r\n            null :\r\n            <React.Fragment key={formElement.id}>\r\n              {\r\n                this.props.formaDeEnvio === \"A convenir\" && formElement.id === 'provincia' ?\r\n                <p className={classes.formInputEnvioMsj}>Elija la provincia de envio:</p> : null\r\n              }\r\n              <Input\r\n             key={formElement.id}\r\n             elementType={formElement.config.elementType}\r\n             elementConfig={formElement.config.elementConfig}\r\n             value={formElement.config.value}\r\n             invalid={!formElement.config.valid}\r\n             shouldValidate={formElement.config.validation}\r\n             touched={formElement.config.touched}\r\n             changed={(event) =>\r\n               this.inputChangeHandler(event, formElement.id)\r\n             }\r\n           />\r\n            </React.Fragment>\r\n             \r\n           \r\n          \r\n        })}\r\n\r\n        <CardOptionsPagos formaDePago={this.props.formaDePago} formaDePagoSelected={this.pagoHandler} />\r\n        {this.props.formaDePago === \"Transferencia Bancaria\" ? \r\n        <p className={classes.discountMessage}>Se le aplicó un 20% de descuento.</p> : null}\r\n        <button\r\n          type=\"submit\"\r\n          className={\r\n            this.props.formaDeEnvio !== null &&\r\n            this.props.formaDePago !== null &&\r\n            this.props.basket.length !== 0 &&\r\n            this.state.formIsValid\r\n              ? arrayClasses[0]\r\n              : arrayClasses.join(\" \")\r\n          }\r\n          disabled={\r\n            this.props.formaDeEnvio === null &&\r\n            this.props.formaDePago === null &&\r\n            !this.state.formIsValid &&\r\n            this.props.basket.length === 0\r\n          }\r\n        >\r\n          Proceder al pago\r\n        </button>\r\n        <Modal show={this.state.showPriceModal} modalClosed={this.showPriceModalHandler}>\r\n          <div className={classes.pagoMessage}>\r\n        <div className={classes.envioMessage}>Forma de Envío: {this.props.formaDeEnvio}\r\n        {\r\n        this.state.orderForm.provincia.value !== 'G.B.A (Gran Buenos Aires)' || this.state.orderForm.provincia.value ===  \"C.A.B.A\" ?\r\n        <span>+ $400</span> : null\r\n       }\r\n        {this.props.formaDeEnvio === \"A convenir\" ?\r\n         <p>Provincia: {this.state.orderForm.provincia.value}</p>: null}\r\n        \r\n       </div>\r\n       <div className={classes.formaDePagoMessage}>Forma de Pago: {this.props.formaDePago}\r\n       {this.props.formaDePago === \"Transferencia Bancaria\" ? <span>- 20%</span> : null}\r\n       </div>\r\n       <CurrencyFormat \r\n                renderText={(value)=>{\r\n                    return(\r\n               <h3 className={classes.precioFinalMessage}>Precio Final: {value}</h3>\r\n                        )\r\n                }}\r\n                decimalScale={2}\r\n                value={this.props.price} //Homework\r\n                displayType={\"text\"}\r\n                thousandSeparator={true}\r\n                prefix={\"$\"}\r\n                fixedDecimalScale={true}\r\n            />\r\n      \r\n          </div>\r\n          <button className={classes.ModalBtn}onClick={this.orderHandler}>\r\n            Ir a Pagar\r\n          </button>\r\n        </Modal>\r\n      </form>\r\n    );\r\n    if (this.state.loading) {\r\n      form = <Spinner />;\r\n    }\r\n\r\n    return <Auxiliary>{form}</Auxiliary>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    basket: state.carrito.basket,\r\n    price: state.carrito.totalPrice,\r\n    formaDePago: state.carrito.formaDePago,\r\n    formaDeEnvio: state.carrito.formaDeEnvio\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onCreateOrder: (order) => dispatch(actions.onCreateOrder(order)),\r\n    onFormaDePagoSelected: (formaDePago, basket) =>\r\n      dispatch(actions.onSelectFormaDePago(formaDePago, basket)),\r\n    onSelectFormaDeEnvio: (formaDeEnvio)=>dispatch(actions.onSelectFormaDeEnvio(formaDeEnvio)),\r\n    onProvinciaSelected: (provincia) => dispatch(actions.onProvinciaSelected(provincia))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(withErrorHandler(ContactData, axios)));\r\n\r\n//this.props.basket.length === 0 &&\r\n"]},"metadata":{},"sourceType":"module"}