{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\Juan\\\\Desktop\\\\paginanook\\\\nookweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import*as actionTypes from'./../actions/actionTypes';var initialState={basket:[],show:false,totalPrice:0,loading:false,order:[],formaDePago:null,formaDeEnvio:null,envioAlInterior:false};var getTotalPrice=function getTotalPrice(basket){var totalPrice=0;if(basket.length>0){var arrayPrice=[];totalPrice=basket.map(function(item){return arrayPrice.push(item.precioParticular*item.cantidad);});totalPrice=arrayPrice.reduce(function(total,amount){return total+amount;});}return totalPrice;};var getEmbalajeCost=function getEmbalajeCost(envioAlInterior,provincia){var costoEmbalaje=0;if(!envioAlInterior&&provincia!=='G.B.A (Gran Buenos Aires)'&&provincia!=='C.A.B.A'){costoEmbalaje=400;}if(envioAlInterior&&provincia!=='G.B.A (Gran Buenos Aires)'&&provincia!=='C.A.B.A'){costoEmbalaje=0;}if(envioAlInterior&&(provincia==='G.B.A (Gran Buenos Aires)'||provincia==='C.A.B.A')){costoEmbalaje=-400;}return costoEmbalaje;};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case actionTypes.ADD_TO_BASKET:return _objectSpread(_objectSpread({},state),{},{basket:[].concat(_toConsumableArray(state.basket),[action.producto])});case actionTypes.REMOVE_FROM_BASKET:var index=state.basket.findIndex(function(product){return product.precioParticular===action.precio;});var newBasket=_toConsumableArray(state.basket);newBasket.splice(index,1);return _objectSpread(_objectSpread({},state),{},{basket:newBasket,totalPrice:state.totalPrice-action.precio});case actionTypes.GET_TOTAL_PRICE:return _objectSpread(_objectSpread({},state),{},{totalPrice:getTotalPrice(action.basket)});case actionTypes.SHOW_INFO_BASKET:return _objectSpread(_objectSpread({},state),{},{show:!state.show});case actionTypes.CREATE_ORDER:return _objectSpread(_objectSpread({},state),{},{order:action.order});case actionTypes.FORMA_DE_PAGO:var descuento=0.8;var nuevoPrecio=state.totalPrice;if(action.formaDePago===\"Transferencia Bancaria\"){nuevoPrecio=nuevoPrecio*descuento;}if(action.formaDePago===\"MercadoPago\"&&action.formaDePago!==null){nuevoPrecio=getTotalPrice(action.basket);}return _objectSpread(_objectSpread({},state),{},{formaDePago:action.formaDePago,totalPrice:nuevoPrecio});case actionTypes.ON_LOADING:return _objectSpread(_objectSpread({},state),{},{loading:!state.loading});case actionTypes.PROVINCIA_SELECTED:var envioAlInterior=false;if(action.provincia!=='G.B.A (Gran Buenos Aires)'&&action.provincia!=='C.A.B.A'){envioAlInterior=true;}else{envioAlInterior=false;}return _objectSpread(_objectSpread({},state),{},{envioAlInterior:envioAlInterior,totalPrice:state.totalPrice+getEmbalajeCost(state.envioAlInterior,action.provincia)});case actionTypes.FORMA_DE_ENVIO:return _objectSpread(_objectSpread({},state),{},{formaDeEnvio:action.formaDeEnvio});case actionTypes.UNMOUNT_CARRITO:return state=initialState;default:return state;}};export default reducer;","map":{"version":3,"sources":["C:/Users/Juan/Desktop/paginanook/nookweb/src/store/reducers/carrito.js"],"names":["actionTypes","initialState","basket","show","totalPrice","loading","order","formaDePago","formaDeEnvio","envioAlInterior","getTotalPrice","length","arrayPrice","map","item","push","precioParticular","cantidad","reduce","total","amount","getEmbalajeCost","provincia","costoEmbalaje","reducer","state","action","type","ADD_TO_BASKET","producto","REMOVE_FROM_BASKET","index","findIndex","product","precio","newBasket","splice","GET_TOTAL_PRICE","SHOW_INFO_BASKET","CREATE_ORDER","FORMA_DE_PAGO","descuento","nuevoPrecio","ON_LOADING","PROVINCIA_SELECTED","FORMA_DE_ENVIO","UNMOUNT_CARRITO"],"mappings":"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","sourcesContent":["import * as actionTypes from './../actions/actionTypes';\r\n\r\n\r\nconst initialState ={\r\n    basket: [],\r\n    show: false,\r\n    totalPrice: 0,\r\n    loading: false,\r\n    order:[],\r\n    formaDePago: null,\r\n    formaDeEnvio: null,\r\n    envioAlInterior: false\r\n}\r\n\r\nconst getTotalPrice = (basket) =>{\r\n    let totalPrice=0;\r\n    if(basket.length > 0){\r\n        let arrayPrice=[];\r\n        totalPrice=basket.map(item => arrayPrice.push(item.precioParticular*item.cantidad))\r\n        \r\n         totalPrice= arrayPrice.reduce((total, amount)=> total+amount);\r\n    }\r\n    return totalPrice;\r\n}\r\n\r\nconst getEmbalajeCost=(envioAlInterior, provincia)=>{\r\n    let costoEmbalaje= 0;\r\n        if(!envioAlInterior && provincia !== 'G.B.A (Gran Buenos Aires)' && provincia !== 'C.A.B.A'){\r\n            costoEmbalaje=400\r\n        }\r\n        if(envioAlInterior && provincia !== 'G.B.A (Gran Buenos Aires)' && provincia !== 'C.A.B.A'){\r\n            costoEmbalaje=0\r\n        }\r\n        if(envioAlInterior && (provincia === 'G.B.A (Gran Buenos Aires)' || provincia === 'C.A.B.A')){\r\n            costoEmbalaje=-400\r\n        }\r\n        return costoEmbalaje\r\n}\r\n\r\nconst reducer = (state= initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.ADD_TO_BASKET:\r\n            return{\r\n                ...state,\r\n        basket: [...state.basket, action.producto],\r\n            }\r\n        case actionTypes.REMOVE_FROM_BASKET:\r\n            \r\n            const index= state.basket.findIndex( product =>product.precioParticular === action.precio);\r\n            let newBasket = [...state.basket];\r\n            newBasket.splice(index, 1);\r\n            \r\n            return{\r\n                ...state,\r\n                basket: newBasket,\r\n                totalPrice: state.totalPrice - action.precio\r\n            }\r\n        case actionTypes.GET_TOTAL_PRICE:\r\n                return{\r\n                    ...state,\r\n                    totalPrice: getTotalPrice(action.basket)\r\n                }\r\n        case actionTypes.SHOW_INFO_BASKET:\r\n            return{\r\n                ...state,\r\n                show: !state.show\r\n            }\r\n    case actionTypes.CREATE_ORDER:\r\n                return{\r\n                    ...state,\r\n                    order: action.order\r\n                }\r\n    case actionTypes.FORMA_DE_PAGO:\r\n        let descuento=0.8;\r\n        let nuevoPrecio=state.totalPrice;\r\n        if(action.formaDePago === \"Transferencia Bancaria\"){\r\n            nuevoPrecio= nuevoPrecio*descuento;\r\n        }\r\n        if(action.formaDePago === \"MercadoPago\" && action.formaDePago !== null){\r\n            nuevoPrecio=getTotalPrice(action.basket);\r\n        }\r\n        return{\r\n            ...state,\r\n            formaDePago: action.formaDePago,\r\n            totalPrice: nuevoPrecio\r\n        }\r\n    case actionTypes.ON_LOADING:\r\n            return{\r\n                ...state,\r\n                loading: !state.loading\r\n            }\r\n    case actionTypes.PROVINCIA_SELECTED:\r\n        let envioAlInterior=false;\r\n        if(action.provincia !== 'G.B.A (Gran Buenos Aires)' && action.provincia !== 'C.A.B.A'){\r\n            envioAlInterior=true\r\n        }else{\r\n            envioAlInterior=false\r\n        }\r\n                return{\r\n                    ...state,\r\n                    envioAlInterior: envioAlInterior,\r\n                    totalPrice: state.totalPrice + getEmbalajeCost(state.envioAlInterior,  action.provincia)\r\n                }\r\n    case actionTypes.FORMA_DE_ENVIO:\r\n                return{\r\n                    ...state,\r\n                    formaDeEnvio: action.formaDeEnvio\r\n                }\r\n   case actionTypes.UNMOUNT_CARRITO:\r\n                    return state=initialState;\r\n                    \r\n        default:\r\n            return state;\r\n    }\r\n   \r\n}\r\n\r\nexport default reducer;"]},"metadata":{},"sourceType":"module"}